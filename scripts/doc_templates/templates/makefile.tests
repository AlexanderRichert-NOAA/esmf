# $Id: makefile.tests,v 1.1 2003/02/28 01:05:04 eschwab Exp $

ALL:  tests

CFLAGS    =
FFLAGS    =
SOURCEC	  = 
SOURCEF	  =

SOURCEH	  = 
OBJSC	  =  
OBJSF	  = 
MANSEC	  = 
LIBBASE	  = 
DIRS	  = 
LOCDIR	  = src/Infrastructure/<Comp>/tests

TESTEXAMPLES_3  = \
	ESMF_<Class>Test RUN_ESMF_<Class>Test ESMF_<Class>Test.rm \
	ESMC_<Class>Test RUN_ESMC_<Class>Test ESMC_<Class>Test.rm

TESTEXAMPLES_9  = \
	ESMF_<Class>Test RUN_ESMF_<Class>TestUNI ESMF_<Class>Test.rm \
	ESMC_<Class>Test RUN_ESMC_<Class>TestUNI ESMC_<Class>Test.rm

EXAMPLESF       = ESMF_<Class>Test.F90
EXAMPLESC       = ESMC_<Class>Test.C

include ${ESMF_DIR}/build/${ESMF_ARCH}/base

tests test: ESMF_<Class>Test ESMC_<Class>Test

ESMF_<Comp>CreateDir:
	mkdir -p ${ESMC_TESTDIR}

ESMF_<Class>Test: chkopts ESMF_<Class>Test.o
	-${F90CXXLD} -o ESMF_<Class>Test ESMF_<Class>Test.o -lesmf ${F90CXXLIBS} ${MPI_LIB} ${MP_LIB} ${THREAD_LIB} ${PCL_LIB}
	${RM} ESMF_<Class>Test.o

RUN_ESMF_<Class>Test:
	-@rm -f testlog stdlog.* logfile.* ESMF_<Class>Test.tmps
	${MPIRUN} -np 4 ESMF_<Class>Test > ESMF_<Class>Test.stdout

RUN_ESMF_<Class>TestUNI:
	-@rm -f testlog stdlog.* logfile.* ESMF_<Class>Test.tmps
	${MPIRUN} -np 1 ESMF_<Class>Test > ESMF_<Class>Test.stdout

ESMF_<Class>Test.rm:
	echo "ESMF_<Class>Test.rm target called here."

ESMC_<Class>Test: chkopts ESMC_<Class>Test.o
	-${CXXF90LD} -o ESMC_<Class>Test ESMC_<Class>Test.o -lesmf ${CXXF90LIBS} ${MPI_LIB} ${MP_LIB} ${THREAD_LIB} ${PCL_LIB}
	${RM} ESMC_<Class>Test.o

RUN_ESMC_<Class>Test:
	-@rm -f testlog stdlog.* logfile.* ESMC_<Class>Test.tmps
	${MPIRUN} -np 4 ESMC_<Class>Test > ESMC_<Class>Test.stdout

RUN_ESMC_<Class>TestUNI:
	-@rm -f testlog stdlog.* logfile.* ESMC_<Class>Test.tmps
	${MPIRUN} -np 1 ESMC_<Class>Test > ESMC_<Class>Test.stdout

ESMC_<Class>Test.rm:
	echo "ESMC_<Class>Test.rm target called here."
