# $Id: common_variables,v 1.31 2003/05/29 22:16:24 flanigan Exp $ 
#
# LIBNAME       - library name
# SOURCE        - source files
# SSOURCE       - single precision versions of some source code
# OBJS          - object files
# SOBJS         - single precision versions of some object files
# ESMC_INCLUDE    - locations of include files
# CPPFLAGS      - preprocessor flags for *.c, *.F preprocessing
# DOCS          - files that contain documentation, readmes etc.
# ESMC_PARCH      - corresponds to the PARCH_arch in the source files, set in 
#                 the file build/${ESMF_ARCH}/base
# ESMF_BUILD    - Root directory to build in.  Set this variable on the make
#                 line to build somewhere other than ESMF_DIR.
# ESMF_LIB_INSTALL - Directory for install target to place libs.
# ESMF_MOD_INSTALL - Directory for install target to place mod files.
#

ESMF_BUILD	= $(ESMF_TOP_DIR)


LDIR		= $(ESMF_BUILD)/lib/lib$(BOPT)/$(ESMF_ARCH)
ESMC_MODDIR     = $(ESMF_BUILD)/mod/mod$(BOPT)/$(ESMF_ARCH)
#ESMF_INCDIR     = $(ESMF_BUILD)/src/include

ESMF_LIBDIR     = $(ESMF_BUILD)/lib/lib$(BOPT)/$(ESMF_ARCH)
ESMF_MODDIR     = $(ESMF_BUILD)/mod/mod${BOPT}/$(ESMF_ARCH)
ESMF_TESTDIR    = $(ESMF_BUILD)/test/test$(BOPT)/$(ESMF_ARCH)
ESMF_EXDIR      = .
ESMF_INCDIR     = $(ESMF_BUILD)/src/include

# Building in the moddir solves problems about trying to copy module files
# in after the fact.
ESMC_OBJDIR	= ${ESMC_MODDIR}
ESMC_TESTDIR	= $(ESMF_BUILD)/test/test${BOPT}/${ESMF_ARCH}
ESMC_DOCDIR	= $(ESMF_TOP_DIR)/doc
ESMF_BUILD_DOCDIR = $(ESMF_BUILD_DIR)/doc

PROTEX		= ${ESMF_TOP_DIR}/scripts/doc_templates/templates/protex 
CC_PROTEX       = ${ESMF_TOP_DIR}/scripts/doc_templates/templates/scripts/do_ccprotex 
CH_PROTEX       = ${ESMF_TOP_DIR}/scripts/doc_templates/templates/scripts/do_chprotex 
F_PROTEX        = ${ESMF_TOP_DIR}/scripts/doc_templates/templates/scripts/do_fprotex 

DO_LATEX	= ${ESMF_TOP_DIR}/scripts/doc_templates/templates/scripts/do_latex
DO_L2H		= ${ESMF_TOP_DIR}/scripts/doc_templates/templates/scripts/do_l2h

LIBNAME		= $(ESMF_LIBDIR)/${LIBBASE}.a
SOURCE		= ${SOURCEC} ${SOURCEF}
OBJS		= ${OBJSC} ${OBJSF}

DO_UT_RESULTS	= ${ESMF_TOP_DIR}/scripts//test_scripts/do_ut_results

ESMC_INCLUDE	= -I${ESMF_TOP_DIR}/${LOCDIR} \
		  -I${ESMF_TOP_DIR}/${LOCDIR}/../include \
		  -I$(ESMF_BUILD)/src/include \
		  -I$(ESMF_TOP_DIR)/src/include \
		  -I/usr/local/include \
		  -I${ESMF_BUILD_DIR}/${ESMF_ARCH} \
		  -I${ESMF_TOP_DIR}/include \
		  -I${ESMC_MODDIR} \
		  ${LOCAL_INCLUDE} \
		  -I${ESMF_TOP_DIR}/src/timing \
		  -I$(ESMF_INCDIR) -I$(ESMF_MODDIR) 

CCPPFLAGS	= ${PCONF} ${ESMC_PARCH} ${CPPFLAGS} \
	 	  -D__SDIR__='"${LOCDIR}"'
FCPPFLAGS	= ${PCONF} ${ESMC_PARCH} ${FPPFLAGS}
C_SH_LIB_PATH	= ${CLINKER_SLFLAG}${LDIR} ${C_DYLIBPATH}
F_SH_LIB_PATH	= ${FLINKER_SLFLAG}${LDIR} ${F_DYLIBPATH}
#
# Defines all libraries needed for using linear and nonlinear solvers.
# The order of listing these libraries is important!
#
ESMC_TIME_LIB	 = -L${LDIR}
#
# ---------------------------------------------------------------------------------------
#
# PCONF - indicates which OPTIONAL external packages are available at your site
#
#
PCONF		= ${ESMC_HAVE_MPE}  ${ESMC_HAVE_BLOCKSOLVE} ${ESMC_HAVE_PVODE} ${ESMC_HAVE_PARMETIS} \
                  ${ESMC_HAVE_AMS}  ${ESMC_HAVE_SPAI}       ${ESMC_HAVE_X11}   ${ESMC_HAVE_MATLAB} \
                  ${ESMC_HAVE_ADIC} ${ESMC_HAVE_JAVA}
EXTERNAL_LIB	= ${MPE_LIB}        ${BLOCKSOLVE_LIB}        ${PVODE_LIB}        ${PARMETIS_LIB} \
                  ${AMS_LIB}        ${SPAI_LIB}                                                  \
                  ${ADIC_LIB} 


#
# ESMF_EXHAUSTIVE is passed (by CPP) into test
# programs to control the number of tests that 
# a test program will do.
#
ifeq ($(ESMF_EXHAUSTIVE),ON) 
FCPPFLAGS += $(FPP_PREFIX)-DESMF_EXHAUSTIVE 
CCPPFLAGS += -DESMF_EXHAUSTIVE 
endif


#
# ----------------------------------------------------------------------------------------
#
# The following include files set customized site, optimization, and version
# options.  Do NOT remove any of these include files.  You should generally
# need to edit only ${ESMF_DIR}/build/${ESMF_ARCH}/base.site to specify your
# particular machine configuration.  See the users manual for details.
#
include $(ESMF_BUILD_DIR)/$(ESMF_ARCH)/base.site
# (This line MUST be present for certain machines (e.g., Cray T3D))
include $(ESMF_BUILD_DIR)/common_$(BOPT)



