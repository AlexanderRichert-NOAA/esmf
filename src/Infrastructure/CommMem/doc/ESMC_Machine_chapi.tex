%                **** IMPORTANT NOTICE *****
% This LaTeX file has been automatically produced by ProTeX v. 1.1
% Any changes made to this file will likely be lost next time
% this file is regenerated from its source. Send questions 
% to Arlindo da Silva, dasilva@gsfc.nasa.gov
 
\parskip        0pt
\parindent      0pt
\baselineskip  11pt
 
%--------------------- SHORT-HAND MACROS ----------------------
\def\bv{\begin{verbatim}}
\def\ev{\end{verbatim}}
\def\be{\begin{equation}}
\def\ee{\end{equation}}
\def\bea{\begin{eqnarray}}
\def\eea{\end{eqnarray}}
\def\bi{\begin{itemize}}
\def\ei{\end{itemize}}
\def\bn{\begin{enumerate}}
\def\en{\end{enumerate}}
\def\bd{\begin{description}}
\def\ed{\end{description}}
\def\({\left (}
\def\){\right )}
\def\[{\left [}
\def\]{\right ]}
\def\<{\left  \langle}
\def\>{\right \rangle}
\def\cI{{\cal I}}
\def\diag{\mathop{\rm diag}}
\def\tr{\mathop{\rm tr}}
%-------------------------------------------------------------

\markboth{Left}{Source File: ESMC\_Machine.h,  Date: Mon Dec  9 19:56:32 MST 2002
}

 
%/////////////////////////////////////////////////////////////
\subsection{C++:  Class Interface ESMC\_Machine - encapsulates platform capabilites and dependencies (Source File: ESMC\_Machine.h)}


  
  
   The code in this file defines the C++ Machine members and declares method 
   signatures (prototypes).  The companion file ESMC\_Machine.C contains
   the definitions (full code bodies) for the Machine methods.
  
   
  
  -----------------------------------------------------------------------------
   
\bigskip{\em USES:}
\begin{verbatim}  #include <ESMC_Base.h>  // all classes inherit from the ESMC Base class.
  //#include <ESMC_XXX.h>   // other dependent classes (subclasses, aggregates,
                         // composites, associates, friends)
 \end{verbatim}{\sf PUBLIC TYPES:}
\begin{verbatim}   class ESMC_MachineConfig;
  class ESMC_Machine;
 \end{verbatim}{\sf PRIVATE TYPES:}
\begin{verbatim} 
  // class configuration type
   class ESMC_MachineConfig {
     private:
  //   < insert resource items here >
   };
 
  // class definition type
  class ESMC_Machine : public ESMC_Base {    // inherits from ESMC_Base class
 
    private:
  //  < insert class members here >  corresponds to type ESMF_Machine members
  //                                 in F90 modules
      int numNodes;         // number of nodes in machine or domain
      int numCPUs;          // number of CPUs in machine or domain
      int numCPUsperNode;   // number of CPUs per Node
      bool hasMPI;          // machine has MPI 1.2
      bool hasOpenMP;       // machine has OpenMP 1.0
      bool hasShmem;        // machine has Shmem
      bool hasPthreads;     // machine has pthreads
      int shMemLatency;     // latency of shared memory (microsec)
      int shMemBandwidth;   // bandwidth of shared memory (MB/s)
      int distMemLatency;   // latency of distributed memory (microsec)
      int distMemBandwidth; // bandwidth of distributed memory (MB/s)
 \end{verbatim}{\sf PUBLIC MEMBER FUNCTIONS:}
\begin{verbatim}    public:
 
  // the following method applies to a shallow class
     int ESMC_MachineInit(int nodes, int cpus, int cpuspernode,
                          bool hasmpi, bool hasopenmp, bool hasshmem,
                          int shmemlat, int shmemband,
                          int distmemlat, int distmemband);
 
  // optional configuration methods
      int ESMC_MachineGetConfig(ESMC_MachineConfig *config) const;
      int ESMC_MachineSetConfig(const ESMC_MachineConfig *config);
 
  // accessor methods for class members
       int ESMC_MachineGetNumNodes(int *nodes) const;
       int ESMC_MachineSetNumNodes(int nodes);
       int ESMC_MachineGetNumCPUs(int *cpu) const;
       int ESMC_MachineSetNumCPUs(int cpu);
       int ESMC_MachineGetNumCPUsperNode(int *cpuspernode) const;
       int ESMC_MachineSetNumCPUsperNode(int cpuspernode);
 
       bool ESMC_MachineHasMPI(void);
       bool ESMC_MachineHasOpenMP(void);
       bool ESMC_MachineHasShmem(void);
       bool ESMC_MachineHasPthreads(void);
       int ESMC_MachineSetHasMPI(bool hasit);
       int ESMC_MachineSetOpenMP(bool hasit);
       int ESMC_MachineSetShmem(bool hasit);
       int ESMC_MachineSetPthreads(bool hasit);
 
       int ESMC_MachineGetshMemLatency(int *lat) const;
       int ESMC_MachineSetshMemLatency(int lat);
       int ESMC_MachineGetshMemBandwidth(int *bandw) const;
       int ESMC_MachineSetshMemBandwidth(int bandw);
       int ESMC_MachineGetdistMemLatency(int *lat) const;
       int ESMC_MachineSetdistMemLatency(int lat);
       int ESMC_MachineGetdistMemBandwidth(int *bandw) const;
       int ESMC_MachineSetdistMemBandwidth(int bandw);
     
  // required methods inherited and overridden from the ESMC_Base class
     int ESMC_MachineValidate(void) const;
     int ESMC_MachinePrint(void) const;
 
  // native C++ constructors/destructors
 	ESMC_Machine(void);
 	~ESMC_Machine(void);
   
  // < declare the rest of the public interface methods here >
 
   // get cpu id
   int ESMC_MachineGetCpuID(int *cpuid) const;
 
   // get node id
   int ESMC_MachineGetNodeID(int *nodeid) const;
 
   // get max cpus on a node
   int ESMC_MachineGetNodeCpuMax(int *maxcpus) const;
   \end{verbatim}{\sf PRIVATE MEMBER FUNCTIONS:}
\begin{verbatim}   private: 
  // < declare private interface methods here >\end{verbatim}

%...............................................................
