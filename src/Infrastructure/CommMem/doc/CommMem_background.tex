% $Id: CommMem_background.tex,v 1.3 2002/07/18 02:58:36 cnh Exp $

\section{Background}

The communication and memory kernels ({\bf \shortname}) elements of ESMF 
will provide a set of services to shield the upper levels of ESMF from system
level functions. The {\bf \shortname} services serve to help
manage the complexity of targetting a wide range of platforms.
System specific code specilaizations will largely be confined 
to the {\bf \shortname} layer.

Two particular areas are addressed by {\bf \shortname}
\paragraph {\bf Basic communication primitives} These are building blocks for 
both the data communication between and within components and for any
control messages that components may need to exchange. Within {\bf \shortname}
these will be designed to bind to different system level libraries
(for example MPI, IPC, mmap, shmem etc..) and will include built-in
low-overhead self-profiling capabilities.
Isolating the basic communication functions of ESMF will help
abstract the communication primitives to allow highly optimized code,
targeted to specific platforms and to specific framework functions
to be easliy inserted into ESMF. The {\bf \shortname}
layer will allow specialized forms of performance critical
primitives to be employed without impacting application
code or upper layers of ESMF code.
Channeling communication and ESMF memory allocation through a single
layer with built-in monitoring
is also designed to support detiled application-level monitoring and
provide potential for partially or fully automated tuning.


\paragraph {\bf Basic memory management} Both user visible and internal
ESMF entities will require memory resources. Within {\bf CMK} reservation,
 monitoring and release mechanisms will be provided for securing system 
memory resources. As with the communication primitivies the
ESMF memory primivtives will include built-in low-overhead self-profiling 
capabilities.


\subsection{Location}

The {\bf CMK} set of services is part of the ESMF infrastructure-utilities 
layer. Many ESMF higher level facilities will use {\bf \shortname} facilities.
The {\bf \shortname} services will not be directly called from user-level
component code.


\subsection{Scope}

The {\bf CMK} services will be limited to potentially performance
critical functions within ESMF and are intended to be used by internal ESMF
code. In the case of communication this includes messaging associated with the 
ESMF {\bf Distributed Grid} {\it Halo} and {\it Transpose} 
operations. In the case of memory resources this includes providing 
memory for ESMF {\it Fields and Grids} data structures and objects.
The {\bf \shortname} facility is not concerned with ESMF {\it partition}
based parallelism as this does not involve any communication between
components or amonst data domains.


\subsection{Related Material}

