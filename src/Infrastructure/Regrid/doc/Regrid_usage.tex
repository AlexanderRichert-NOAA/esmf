% $Id: Regrid_usage.tex,v 1.3 2003/11/14 20:53:50 jwolfe Exp $

%\subsection{Design}

% <Describe strategy for overall class design.>

Regridding includes any process that transforms a field from one ESMF
Grid to another.  The following regridding methods are supported:
\begin{description}
\item[ESMF\_RegridMethod\_FieldCopy] same Grid, just copy the field
\item[ESMF\_RegridMethod\_Redist  ] same PhysGrid just redistribute field
\item[ESMF\_RegridMethod\_Bilinear] bilinear (logically-rectangular grids)
\item[ESMF\_RegridMethod\_Bicubic ] bicubic  (logically-rectangular grids)
\item[ESMF\_RegridMethod\_Conserv1] first-order conservative
\item[ESMF\_RegridMethod\_Conserv2] second-order conservative
\item[ESMF\_RegridMethod\_Raster  ] regrid by rasterizing domain
\item[ESMF\_RegridMethod\_NearNbr ] nearest-neighbor distance-weighted average
\item[ESMF\_RegridMethod\_Fourier ] Fourier transform
\item[ESMF\_RegridMethod\_Legendre] Legendre transform
\item[ESMF\_RegridMethod\_Index   ] index-space regridding (shift, stencil)
\item[ESMF\_RegridMethod\_Linear  ] linear for 1-d regridding
\item[ESMF\_RegridMethod\_Spline  ] cubic spline for 1-d regridding
\item[ESMF\_RegridMethod\_User    ] user-supplied method
\end{description}

Regrid is designed to be called with Field or Bundle
arguments in order to utilize information embedded in
these objects.  For example, Regrid requires knowledge
of underlying grid information (both PhysGrid and DistGrid)
and of the relative location (staggering) of Fields on
the Grid.  In addition, Regrid uses any mask information
that may be associated with a Field.

Regrid is separated into a Create function and a
Run function. The Create function computes
interpolation weights and initializes communication
requirements for performing a regridding of a Field
from one Grid to another.  The Run function uses
a created Regrid object to perform the actual regridding
of Fields or Bundles.  The reason for the separation
is that in many cases, the initial creation is
expensive and re-used often throughout an application.

Because many methods are supported for regridding,
the main Create function branches to a specific
creation function based on the regrid method requested
(e.g. bilinear, conservative, spectral).  Each of
these regrid methods are in a separate module to
prevent the main Regrid module from becoming too
large.  The user is unaware of this hierarchy as the
top-level module provides a unified API.

The Regrid object created by the ... wait for it...
Regrid Create function contains a set of ``links''
which identify how a field at a point on the
destination grid is related to a field at a
point on the source grid.  As such, a ``link''
consists of a source address, a destination address
and a weight.  Because the Grids are generally
distributed very differently, the Regrid object
also contains communication information
for any data motion required for the regridding.

