% $Id: newDELayout_desc.tex,v 1.1 2004/03/23 16:37:15 theurich Exp $

The ESMF DELayout layer is an integral part of ESMF's ``Communication and Memory Kernel'' (CMK) which consists of two classes, ESMF\_VM and ESMF\_DELayout.
\begin{center}  
\begin{tabular}{|p{6in}|}
\hline
\vspace{.01in}
{\bf Key Features} \\[.01in]
Problem decomposition in terms of virtual decomposition elements.\\
Mapping of virtual problem decomposition onto an ESMF virtual machine.\\[.03in] \hline
\end{tabular}
\end{center}

\subsection{Problem decomposition}
Problem decomposition is expressed in terms of {\bf decomposition elements} (DEs) and {\bf connection weights} (CWs) between DEs. The application writer provides ESMF with valuable information about the decompostion of the problem when creating a DELayout object. From an ESMF perspective the DEs are the smallest units into which the application writer divides the problem. The DEs should be thought of as virtual or logical units, not necessarily having a 1-to-1 correspondence to a physical processing element (PE) of an ESMF\_VM object or the underlying physical machine. Consequently the number of DEs in an ESMF\_DELayout object is not limited to the number of available PEs, which is a runtime parameter.

The ESMF\_DELayout not only keeps track of the number of DEs into which a problem is decomposed, but furthermore allows to specify a problem topology by means of CWs, i.e. connection weights, between DEs. A CW connects any two DEs and ascribes an integer between 0 and 100 to this connection, 0 indicating that these DEs will never communicate with each other whereas 100 indicating that communication between these DEs is most active. Clearly the communication weight is a relative measure meaningful only to compare communication within a given ESMF\_DELayout. The significance of the CWs is to provide ESMF with the information necessary to automatically map the virtual problem decomposition onto an ESMF virtual machine.

\subsection{Mapping onto virtual machine}
Each ESMF component is executed by an ESMF\_VM object, also called a {\em virtual machine}. The virtual machine provides access to {\bf Persistent Execution Threads} (PETs) and {\bf virtual memory space}. Details on how the ESMF virtual machine object manages these resources are provided in the ESMF\_VM reference document. In addition to the problem decomposition description an ESMF\_DELayout object also holds DE-to-PET mapping information and thus describes which thread of execution is responsible for a certain portion of the problem and consequently in which virtual memory space the data associated with a certain DE is located.

The DE-to-PET mapping can either be prescribed by the application writer or may be left to ESMF. If left to ESMF the framwork will try to find the best possible match between an ESMF\_DELayout and an ESMF\_VM object based on the problem topology and the internal details of the available virtual machine.

Notice that a single ESMF component may contain multiple ESMF\_DELayouts, all of which will map onto the same ESMF\_VM instance. 





%\begin{center}
%\includegraphics{TimeMgr_desc.eps}
%\end{center}

