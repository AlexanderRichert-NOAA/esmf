% $Id: Grid_desc.tex,v 1.13 2005/01/12 22:09:19 jwolfe Exp $
%
% Earth System Modeling Framework
% Copyright 2002-2003, University Corporation for Atmospheric Research, 
% Massachusetts Institute of Technology, Geophysical Fluid Dynamics 
% Laboratory, University of Michigan, National Centers for Environmental 
% Prediction, Los Alamos National Laboratory, Argonne National Laboratory, 
% NASA Goddard Space Flight Center.
% Licensed under the GPL.

% <Describe class function and relation to other classes.>

The ESMF Grid class represents all aspects of the computational domain and its
decomposition in a parallel-processing environment, and must provide access to
any necessary grid information to the rest of the ESMF.  The ESMF Grid class
is included in the Field class and the Gridded Component class
and provides information needed in data communication methods like halo and
redistribution.  It has methods to internally generate a variety of
simple grids or read in more complicated grids provided by a user 
(reading in grids is not yet implemented).  The ESMF Grid class supports
multi-component coupling by providing a common structure necessary for regridding.

ESMF Grids are currently assumed to be two-dimensional, logically-rectangular
horizontal grids, with an optional vertical grid whose coordinates are
independent of those of the horizontal grid.  Each Grid is assigned a
staggering in its create method call, which helps define the Grid according
to typical Arakawa nomenclature.  The Grid will spawn subGrids at the relative
cell locations that are associated with its staggering.  For example, an
Arakawa C grid has some computational fields defined at the cell centers
and other fields defined at cell face centers.  An {\tt ESMF\_Grid} assigned
Arakawa C staggering will therefore make subGrids at the cell centers and
specified cell faces (please see the Grid Options section for more information
and a complete list of staggerings).  A vertical grid may also be represented
as one or more subGrids.  When an {\tt ESMF\_Field} is created, it must be
assigned to one of the appropriate subGrids, represented by the identifier
{\tt ESMF\_RelLoc} (or relative location), present in the {\tt ESMF\_Grid} it 
is being created from.  Continuing the example above, an {\tt ESMF\_Field}
created from a Grid with Arakawa C staggering would have to be defined at either
the cell center or one of the prescribed cell faces. 

ESMF differentiates between global data, which describes a complete set of data,
and DE-local data, which describes a distributed or decomposed chuck of data
located on a single DE.  The Grid class plays an integral role in this concept.
A Grid is first instantiated, via a create call, on all DEs in its domain, but
only in a global sense.  By that we mean it stores only information about the
global Grid, such as the number of grid cells and the coordinate extents, but
has not generated all the information that will end up distributed, such as the
cell coordinates.  The Grid is then decomposed onto a given DELayout via an
{\tt ESMF\_Distribute()} call.  At that point, the DE-local data types are
created and computed, so that on each DE there resides necessary global Grid
information as well as its own DE-local Grid data.  The DE-local data represented
by an {\tt ESMF\_Field} is defined by the decomposition of the underlying
{\tt ESMF\_Grid}.

