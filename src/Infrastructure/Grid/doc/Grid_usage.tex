% $Id: Grid_usage.tex,v 1.8 2004/08/12 19:50:22 jwolfe Exp $

%\subsection{Design and Implementation Notes}


In typical applications, Grids are created either internally or read in from
a file.  The {\tt ESMF\_Grid} class will provide methods for both, though 
currently it only has routines for simple internal Grid generation.  It also
has a variety of methods to set and get Grid parameters like the number of cells
associated with a particular DE.  

The creation of a distributed Grid requires multiple steps, as
illustrated in the example code below.  The {\tt ESMF\_GridCreateHorz<GridType>()} call, which has an
explicit interface for each GridType, allocates space for the Grid class and sets
parameters defining the horizontal grid.  A vertical subGrid can then be attached
to the Grid via an {\tt ESMF\_GridAddVert<VertGridType>()} call.  Currently a Grid can have only a single
vertical subGrid.  The last call, {\tt ESMF\_GridDistribute()}, allocates some of
the Grid subclasses and distributes the Grid in either a default or
user-specified decomposition.  Please note that {\tt ESMF\_GridDistribute()} must
be called, even if mpiuni is used for communication.  Currently, these calls must
be made in this order (i.e. it is not possible to add a vertical subGrid to an
already distributed Grid), and while an {\tt ESMF\_GridAddVert<VertGridType>()} call
is optional, both an {\tt ESMF\_GridCreate<GridType>()} and
{\tt ESMF\_GridDistribute()} call are required.

