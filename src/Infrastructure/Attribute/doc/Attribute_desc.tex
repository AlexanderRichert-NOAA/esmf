% $Id: Attribute_desc.tex,v 1.40 2010/08/30 19:43:32 murphysj Exp $
%
% Earth System Modeling Framework
% Copyright 2002-2010, University Corporation for Atmospheric Research,
% Massachusetts Institute of Technology, Geophysical Fluid Dynamics
% Laboratory, University of Michigan, National Centers for Environmental
% Prediction, Los Alamos National Laboratory, Argonne National Laboratory,
% NASA Goddard Space Flight Center.
% Licensed under the University of Illinois-NCSA License.


The ESMF Attribute Class was created with the long-term goal of enabling models to be self-describing. Note that Attributes are individual name-value pairs, while Metadata is a term used to describe instances of Attributes that describe a particular object. While most of the discussion to follow is about specific Attributes, the overall goal is to create a Metadata system.   

\subsubsection{ESMF's Approach to Attributes}

ESMF's Approach to attributes can be summed up in the following:

\begin{itemize}
  \item Implement community standards where they exist
  \item Associate Attributes with the ESMF object they describe. Currently, the following ESMF objects can have Attributes:
  \begin{itemize}
     \item Array
     \item ArrayBundle
     \item CplComp
     \item GridComp
     \item DistGrid
     \item FieldBundle
     \item Field
     \item Grid
     \item State
     \end{itemize}
  \item Establish pre-defined Attribute packages (see Section \ref{sec:AttPacks})to make Attribute creation easier for the user
  \item Allow for user-defined Custom Attribute packages (see Section \ref{sec:CustomAttPacks})
  \item Enable the nesting of Attribute packages (see Section \ref{sec:AttPackNesting}) including Custom packages
  \item Enable complex Attribute heirarchies (see Section \ref{sec:AttHeir}
  \item Export Attributes in more than one format (see Section \ref{sec:AttributeExports})
  \item Ensure that all Attributes are consistent across the entire virtual machine of the object to which they are attached  
\end{itemize}

\subsubsection{Attribute Hierarchies}
\label{sec:AttHeir}

Of the ESMF objects with Attributes, only some can link their Attributes together in an Attribute hierarchy.  These objects are:

\begin{itemize}
\item CplComp
\item GridComp
\item State
\item Field
\item FieldBundle
\item Array
\item ArrayBundle
\end{itemize}

The most common use for this capability is for linking the Attributes of a Field to the FieldBundle which holds it, which is then linked to the State that is used to transport all of the data for a Component.  All of these links, with the exception of the link between the Component and the State, are automatically handled by ESMF. Additionally, the State will automatically set the {\it import} and {\it export} boolean valued Attributes that are part of the ESMF supplied standard Attribute package for Field when that Field is added to the State. 

Attribute hierarchies are linked in a "shallow" manner, meaning that the Attributes belonging to an external object are not copied, they are merely referenced by a pointer.  This is important to ensure that the Attribute hierarchy has a one-to-one correspondence with the object hierarchy.  
