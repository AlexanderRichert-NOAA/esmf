% $Id: DataMap_design.tex,v 1.1 2003/03/10 21:54:19 cdeluca Exp $

%\subsection{Design}

% <Describe strategy for overall class design.>

The DataMap class maintains information about the way an ESMF Array
object maps to the associated Grid in a Field object.  The Array class
maintains the linearization of multidimensional data to memory addresses,
but the DataMap class maintains the mapping between rank numbers and
Grid axes, and information about vector or tensor interleaving.

It also manages information about the interleaving of multiple Fields
for those buffers associated directly with a Bundle object.  This
includes interleaving of fields and possible padding between Field
values.

The DataMap class implements methods for reordering or repacking
memory which can be transparent to the calling code.  None of the
methods in the DataMap class change data values; they simply
change the mapping to memory addresses.

In the future it may implement an Iteration class which could simplify
the task of operating on items in the Array when the memory
access pattern is complex (strides, interleaving of fields, etc).

