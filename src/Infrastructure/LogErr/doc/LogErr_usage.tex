% $Id: LogErr_usage.tex,v 1.11 2004/09/24 20:52:46 cpboulder Exp $

%\subsection{Use and Examples}

A default Log is created at {\tt ESMF\_Initialize()}.  ESMF handles 
the initialization and finalization of the default Log so the user 
can immediately start using it.  A single default Log is opened 
in the directory that initializes the default Log.  If a Log is 
not present, a new one is created.  If multiple Logs are 
desired, they must be explicitly created or opened using 
{\tt ESMF\_LogOpen()}.

If a user wants to use a new or different Log, the user must call
{\tt ESMF\_LogOpen()} and pass in a Log object and filename to open a Log 
file.
 
By default, the Log file is not truncated at the start of a new run; it just
gets appended to each time.  Future functionality could include an option to
either truncate or append to the Log file. 

In all cases where a Log is opened, a unit number is assigned to a specific
Log.  A Log is assigned the lowest available unit number starting with
11.  If a unit number is occupied, the next higher unit number is 
checked using the "inquire" method.  The process repeats until a free unit 
number is found or when the unit number reaches {\tt ESMF\_LOGUPPER} in 
which case an error is returned.  As a result, the user should always check
for free numbers using "inquire" to prevent potential unit number conflicts.
In the near future we anticipate supporting an option in which a desired
unit number can be passed in.

The user can then set or get options on how the Log should be used 
with the {\tt ESMF\_LogSet()} and {\tt ESMF\_LogGet()} methods.  These are 
not fully implemented at this time. 

Depending on how the options are set, {\tt ESMF\_LogWrite()} either writes user
messages directly to a Log file or writes to a buffer that can be flushed when 
full or by using the {\tt ESMF\_LogFlush()} method.

For every {\tt ESMF\_LogWrite()}, a time and date stamp is prepended to the
Log entry.  The time is given in microsecond precision.

When calling {\tt ESMF\_LogWrite()}, the user can supply an optional line,
file and method.  These arguments can be passed in explicitly or with the help
of cpp macros.  In the latter case, a define for an {\tt ESMF\_FILE} must be 
placed at the beginning of the code and a define for {\tt ESMF\_METHOD} must
be placed at the beginning of each method.  The user can then use the
{\tt ESMF\_CONTEXT} cpp macro in place of line, file and method to insert the 
parameters into the method.  The user does not have to specify line number as
it is a value supplied by cpp.

When done writing messages, the Log is closed by calling 
{\tt ESMF\_LogClose()} which will release the assigned unit number.




