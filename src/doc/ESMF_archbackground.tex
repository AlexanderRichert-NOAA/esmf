\section{Evolution of Earth Science Frameworks}
\label{sec:archbackground}

The ESMF represents a next step in the evolution of Earth science
frameworks.  The ideas and the experience that inform its design
are drawn from widely used Earth science modeling systems 
developed by ESMF collaborators such as FMS, GEMS, the modular NCAR 
Flux Coupler, and the WRF Advanced Software Framework (e.g., \cite{fms, gems,
wrf, ncarcpl}).  Other ESMF collaborators 
have contributed to the development of modeling and simulation tools in related 
fields \cite{deluca, petsc}.  Each of these efforts is a modular,
portable, high-performance system for creating multi-component applications
on parallel computing platforms.  Each also represents a productive
collaboration between scientists, computational scientists and software
engineers that has continued into ESMF.  

Object-oriented design concepts are used extensively in existing frameworks
(see Section~\ref{sec:oop} for more on object-oriented design). For example, 
in GEMS encapsulation 
via derived types and modules increases portability, hides details of the 
computing platform from the user, and results in a very simple and natural
interface for creating coupling applications.  
In FMS and other codes, polymorphism and operator overloading are 
employed throughout to simplify interfaces.  Coupling systems such 
as the NCAR Flux Coupler use the concept of generic components to
increase interoperability.  The WRF system is one of the few 
examples anywhere of an operational code with a programming model 
that effectively and simply allows users to create data structures 
for a dual-tiered architecture, and that has been carefully designed 
for high performance on both vector supercomputers and microprocessor-based 
platforms \cite{wrfperfport}.

In ESMF, we intend to retain the scientist-friendly 
aspect of these frameworks as well as the strongest features of their design.  
At the interface, they present coupling and
communication in terms that scientists can easily understand, and they 
offer a language interface, F90, that scientists are already familiar 
with.  

Many of these frameworks share features and design strategies in common, yet 
they are as a whole not
interoperable with each other, nor can any currently address the requirements
of the broad Earth system community.  In ESMF, the creators of 
these successful smaller frameworks have joined to collectively create an
entirely new system that extends the features of their frameworks and provides 
enhanced cross-domain interoperability and reuse.



