% $Id: ESMF_install.tex,v 1.4 2001/11/28 22:25:32 dneckels Exp $

\section{Installation}

Currently the following environment variables need to be set:
\begin{verbatim}
  ESMF_DIR      top-level ESMF directory
  ESMF_ARCH     platform and compiler configuration
\end{verbatim}

\noindent The following configurations are supported:

\begin{tabular}{lll}
{\tt ESMF\_ARCH}  & {\tt alpha}      &  OSF1, Native compilers. \\
                  & {\tt IRIX64}     &  IRIX64, MIPSpro/mpt 64 bit compilers. \\
                  & {\tt IRIX}       &  IRIX64, MIPSpro/mpt n32 abi compilers. \\
                  & {\tt rs6000\_sp}  &  AIX, mpxlf90\_r, mpcc\_r, and mpCC\_r.  \\
                  & {\tt linux\_gnupgf90} & Linux, pgf90, gcc and g++.  \\
                  & {\tt linux\_pgi}  &  Linux, pgf90, pgcc, pgCC. \\
                  & {\tt linux\_lf95} &  Linux, lf95, gcc, g++. \\
                  & {\tt solaris}        &  SunOs, SUNWspro compilers. \\
                  & {\tt solaris\_hpc}   &  SunOs, SUNWhpc compilers. \\
\end{tabular}

\smallskip

The library requires {\tt gmake} to build.  Simultaneous multiple architecture builds are supported, with
one restriction; the test cases may only be run on one platform at a time. 

\smallskip

\noindent Build the library with the command:
\begin{verbatim}
  gmake BOPT=g  
\end{verbatim}
  for a debug version or
\begin{verbatim}
  gmake BOPT=O  
\end{verbatim}
  for an optimized version.

A test suite is included with the library.  Tests are provided for both MPI
and uniprocessor builds. 

\noindent To build and run MPI C tests:

\begin{verbatim}
  gmake BOPT=g test_c
\end{verbatim}

\noindent To build and run MPI F90 tests:
\begin{verbatim}
  gmake BOPT=g test_f90
\end{verbatim}

\noindent To build and run non-MPI C tests:
\begin{verbatim}
  gmake BOPT=g test_cuni
\end{verbatim}

\noindent To build and run non-MPI F90 tests:
\begin{verbatim}
  gmake BOPT=g test_f90uni
\end{verbatim}

Output files from the test examples will be directed to files in:
\begin{verbatim}
${ESMF_DIR}/test${BOPT}/${ESMF_ARCH}
\end{verbatim}

\noindent To build documentation:
\begin{verbatim}
  gmake BOPT=g alldoc
\end{verbatim}

To use the library from C/C++, link with the library executable and include
the {\tt ``ESMC.h''} file.
To use the library from Fortran, link with the library executable and
create links to the library modules in your build directory.  These are
in the top level {\tt mod} directory under the appropriate architecture.  Alternately, 
most compilers have a module-include-path directive which may be used to point
to the correct module directory.
To include the library in application modules, {\tt USE} the
module, e.g. {\tt ESMF\_TimeMgmtMod}.  
