% $ Id: $

Here we describe the requirements that apply to the whole body of 
ESMF software.  We adopt the standard requirements format described in 
the \htmladdnormallink{ESMF Software Developer's Guide}{http://www.esmf.ucar.edu/esmf\_docs/dev\_guide}.  The abbreviation used to identify
these General Requirements is {\bf GR}.

\req{Language Bindings}
ESMF software shall support the following language bindings:

\sreq{Fortran 90 Interface}
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} All codes except GFDL-HIM require F90 interfaces. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Interface inspection. 
\end{reqlist}

\sreq{C Interface} 
\begin{reqlist}
{\bf Priority:} 2. \\
{\bf Source:} GFDL-HIM \\
{\bf Status:} Proposed. \\
{\bf Verification:} Interface inspection. 
\end{reqlist}

\sreq{C++ Interface}
\begin{reqlist}
{\bf Priority:} 3. \\
{\bf Source:} None of our codes currently require this. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Interface inspection.
\end{reqlist}

\req{Platforms}
The ESMF shall operate on the following platforms:

\sreq{Cray T3E}
\begin{reqlist}
{\bf Priority:} 2. \\
{\bf Source:} NSIPP home system. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Unit test and system test.
\end{reqlist}

\sreq{IBM SP}
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} NCAR home system. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Unit test and system test.
\end{reqlist}

\sreq{SGI Origin 3000}
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} GFDL home system.  May be part of ESMF testbed system. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Unit test and system test.
\end{reqlist}

\sreq{Compaq ES65}
\begin{reqlist}
{\bf Priority:} TBD. \\
{\bf Source:} May be part of ESMF testbed system. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Unit test and system test.
\end{reqlist}

\sreq{PC Linux platforms (including cluster)}
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Required for cluster milestones. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Unit test and system test.
\end{reqlist}

\req{Performance}
The framework shall not increase the execution time of an existing code 
written without the framework by more than 10\% on scalar 
architectures with moderate numbers of processors (100-1000).
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Required for milestone G. \\
{\bf Status:} Proposed. \\
{\bf Verification:} At minimum, test using NCEP-ATM.
\end{reqlist}

\req{Runtime Configurability}
The ESMF shall allow the user to set certain application parameters at runtime.

\sreq{Decomposition}
ESMF shall allow domain decomposition and the number of processors, 
nodes, and/or threads to be configurable at runtime.  The choice of
parallelization mechanism (message passing/multithreading/combination)
must be configurable at runtime.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Required for CAM-EUL. \\
{\bf Status:} Proposed. \\
{\bf Verification:} System test.
\end{reqlist}

\sreq{Resolution}
ESMF shall allow model resolution to be configurable at runtime.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Required for Milestone G. \\
{\bf Status:} Proposed. \\
{\bf Verification:} System test.
\end{reqlist}

\req{Bit Reproducibility}
It is desirable to be able to provide, in a special execution 
mode, bit-to-bit reproducibility of the same executable on different 
platforms and/or with different parallelization techniques applied.
\begin{reqlist}
{\bf Priority:} \\
{\bf Source:} \\
{\bf Status:} Proposed. \\
{\bf Verification:} System test.
\end{reqlist}

\req{Fault Tolerance}
The ESMF shall be instrumented for error handling consistly across the
framework.  The user shall receive ample information on errors.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Required by all codes. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Interface inspection, code inspection, unit test, system test.
\end{reqlist}

\req{Modularity}
Layers of the framework will be designed to adapt to
restructuring of other parts of the framework and user-supplied components.  
For example, the coupling layers should be able to adapt to different 
implementations and data structures of component models.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Required for interoperability Milestones I and J. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Interoperability experiments.
\end{reqlist}

\req{Ease of Adoption}
It must be straightforward to integrate ESMF into an application 
that is reasonably modular.  We adopt as a goal that such applications should
need to modify no more than 2\% of their source code to utilize the coupling
features of ESMF.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} GFDL codes. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Line count!
\end{reqlist}

\req{Maintenance}
The ESMF must be maintained as a long-term commitment by at least one
institution.  This maintenance must extend beyond adaptation to the 
computational environment, and must include an ongoing research component
dedicated to increasing the performance, flexibility and functionality of
the software.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} GFDL codes. \\
{\bf Status:} Proposed. \\
{\bf Verification:} Publicly documented commitment, line item in 
projected budgets.
\end{reqlist}






