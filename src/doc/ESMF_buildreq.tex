% $Id: ESMF_buildreq.tex,v 1.3 2003/02/07 20:13:16 flanigan Exp $

\sreq{Build}

\ssreq{Build system will use GNU Make}
The build system will utilize the Build program Make from
GNU.  Other vendors' make programs will not be supported.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Library Archive Files}
Both .a and .so archive files will be created by the 
build system.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:}  proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Common Targets}
The build system tasks will be controlled with a series of
makefile targets. These are the targets that will be available
for all releases:

\begin{description}
\item[all] Builds all libraries, test programs and documentation.
\item[install] Installs ESMF products.
\item[build\_libs] Builds .so archive files.
\item[build\_c] Compiles all c and c++ source code.  
\item[build\_f] Compiles all FORTRAN source code 
\item[unit\_test\_all] Builds and runs the unit tests
\item[unit\_test\_c] Builds and runs the unit tests written in c/c++.
\item[unit\_test\_uni\_c] Builds and runs single processor tests written in c/c++.
\item[unit\_test\_f] Builds and runs unit tests written in FORTRAN.
\item[unit\_test\_uni\_f] Builds and runs the single processor tests written in FORTRAN.
\item[system\_test\_all] Builds and runs all system tests.
\item[system\_test\_number] Builds and runs a specific system test.
\item[docs] Builds all formats of the documentation.
\item[dvi] Builds dvi documentation files.
\item[pdf] Builds pdf documentation files.
\item[html] Builds html documentation files.
\item[clean] Removes all products for current architecture.
\item[clobber] Removes all products for all architectures.
\item[cleandoc] Removes all the processed documentation files.
\end{description}

\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} code inspection
\end{reqlist}

\ssreq{Local Builds}
Builds within the current working directory will be
accomplished with a build to the same targets as
used in the top level.
Only build tasks within and below the current working directory
will be processed.  
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Internal Documentation}
Documentation will exist to explain the structure and 
internal workings of the Build System.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{User Documentation}
Documentation will exist to cover steps needed to build ESMF
EVA and Implementation Report  source trees.  This will include procedures for 
changing the compile and link options.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Developer Documentation}
Documentation will exist to cover steps needed to add source
code to the ESMF and EVA source trees.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{EVA Builds}
The same makefile targets, variables and rules
will be used by the EVA build system.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}


\ssreq{Concurrent Builds}
The same set of files can be used for builds on separate 
system architectures concurrently.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Dependency Checking}
The build system will take into account the dependencies 
between source code files and build products.  
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} system test
\end{reqlist}

\ssreq{Automatic Dependency Generation}
The build system will scan source code files to 
generate dependency lists.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} system test
\end{reqlist}

\ssreq{Log Files}
Status and error log files will be generated by 
the build system.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Configuration Checking}
The build system will check for the required system 
libraries and utilities.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF-Core \\
{\bf Status:} proposed \\
{\bf Verification:} test
\end{reqlist}

\ssreq{Easily customize build for local machine}
The ESMF shall have the ability to easily customize the build environment. 
System libraries that are required can be set easily, without modifying 
the build files directly. If the paths to required system libraries 
are not provided or incorrect the build system will let the user know 
how to set them and die gracefully.  
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} CCSM-CPL. \\
{\bf Status:} Approved-2. \\
{\bf Verification:} Set library paths correctly and incorrectly and test that 
the build acts appropriately.
\end{reqlist}
