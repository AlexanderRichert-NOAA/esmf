% $Id: ESMF_buildreq.tex,v 1.6 2003/07/09 22:03:25 flanigan Exp $

\sreq{Build}

\ssreq{Library Archive Files}
The build system will create  archive library files and when
possible, shared object library files. Archive library files commonly
have the file name extension .a.  Shared object library files commonly
have .so as their file name extension.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:}  proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Common Targets}
The build system tasks will be controlled with a series of
makefile targets. Standard targets will be used whenever 
possible. These are the targets that will be available
for all releases:

\begin{description}
\item[all] Builds all libraries, test programs and documentation.
\item[install] Installs ESMF products.

\item[build\_libs] Builds .so archive files.
\item[build\_c] Compiles all c and c++ source code.  
\item[build\_f] Compiles all FORTRAN source code 

\item[tests] Builds and runs the unit tests
\item[tests\_uni] Builds and runs single processor unit tests.

\item[run\_tests\_uni] Runs the single processor tests.
\item[system\_tests] Builds and runs system tests.
\item[system\_tests\_uni] Builds and runs single processor system tests.

\item[alldoc] Builds all formats of the documentation.
\item[dvi] Builds dvi documentation files.
\item[pdf] Builds pdf documentation files.
\item[html] Builds html documentation files.
\item[clean] Removes all products for current architecture.
\item[clobber] Removes all products for all architectures.

\end{description}

\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} code inspection
\end{reqlist}

\ssreq{Local Builds}
Builds within the current working directory will be
accomplished with a build to the same targets as
used in the top level.
Only build tasks within and below the current working directory
will be processed.  
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Internal Documentation}
Documentation will exist to explain the structure and 
internal workings of the Build System.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{User Documentation}
Documentation will exist to cover steps needed to build ESMF,
EVA and Implementation Report  source trees.  This will include procedures for 
changing the compile and link options.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Developer Documentation}
Documentation will exist to cover steps needed to add source
code to the ESMF and EVA source trees.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{EVA Builds}
EVA will will be able to access the build system
of a checked out and built  ESMF release.  EVA will
have the ability to use .a or .so ESMF library files
without access to ESMF source code tree.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}


\ssreq{Concurrent Builds}
The same set of files can be used for builds on separate 
system architectures concurrently.  This requirement also
applies to building and running of all unit and system
tests.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Dependency Checking}
The build system will take into account the dependencies 
between source code files and build products.  
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} system test
\end{reqlist}

\ssreq{Automatic Dependency Generation}
The build system will scan source code files to 
generate dependency lists.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} system test
\end{reqlist}

\ssreq{Log Files}
Status and error log files will be generated by 
the build system.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} inspection
\end{reqlist}

\ssreq{Configuration Checking}
The build system will check for the required system 
libraries and utilities.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} test
\end{reqlist}

\ssreq{Easily customize build for local machine}
The ESMF shall have the ability to easily customize the build environment. 
System libraries that are required can be set easily, without modifying 
the build files directly. If the paths to required system libraries 
are not provided or incorrect the build system will let the user know 
how to set them and die gracefully.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} CCSM-CPL. \\
{\bf Status:} Approved-2. \\
{\bf Verification:} Set library paths correctly and incorrectly and test that 
the build acts appropriately.
\end{reqlist}

\ssreq{Build from read only directory}
The ESMF library and it test applications
will be able to be built from ESMF
source code that is stored in a
read only directory.

\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} test
\end{reqlist}

\ssreq{Build system can be used to build ESMF applications}
The makefile fragments of the build system will 
be designed so that they can used in the makefiles 
of applications that use ESMF.

\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} test
\end{reqlist}

\ssreq{Build rules will be easily overridden}
Rules that define compile and link commands will be
easily overridden.

\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} Application Group \\
{\bf Status:} proposed \\
{\bf Verification:} test
\end{reqlist}


