% $Id: ESMF_buildreq.tex,v 1.1 2003/01/27 20:30:14 flanigan Exp $

\sreq{Build}

\ssreq{Build system will use GNU Make}
The build system will utilize the Build program Make from
GNU.  Other vendors' make programs will not be supported.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Makefiles will test make being used and generate
warning if GNU make not being used.
\end{reqlist}

\ssreq{Library Archive Files}
Both .a and .so archive files will be created by the 
build system.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} After build linkable .a and .so files will exist.
\end{reqlist}

\ssreq{Targets}
The build system tasks will be controlled with a series of
makefile targets.  These targets will only be available 
in the makefile located in \$ESMF\_DIR.  These targets will be:
\begin{description}
\item[all] Builds all libraries, test programs and documentation.
\item[install] Installs ESMF products.
\item[build\_libs] Builds .a and .so archive files.
\item[build\_c] Compiles all c and c++ source code.  (Create libs ?)
\item[build\_fortran] Compiles all FORTRAN source code (Create libs ?)
\item[build\_test] Compiles and links the test program source code.
\item[docs] Builds all formats of the documentation.
\item[dvi] Builds dvi documentation files.
\item[pdf] Builds pdf documentation files.
\item[html] Builds html documentation files.
\item[clean] Removes all products for current architecture.
\item[clobber] Removes all products for all architectures.
\end{description}

\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Review
\end{reqlist}

\ssreq{Local Builds}
Builds within the current working directory will be
accomplished with a build to the target ``local''.
Only build tasks within and below the CWD will be
processed.  
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Review
\end{reqlist}


\ssreq{Internal Documentation}
Documentation will exist to explain the structure and 
internal workings of the Build System.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Less Confusion.
\end{reqlist}

\ssreq{User Documentation}
Documentation will exist to cover steps needed to build ESMF
and EVA source trees.  This will include procedures for 
changing the compile and link options.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} ESMF Group Review
\end{reqlist}

\ssreq{Developer Documentation}
Documentation will exist to cover steps needed to add source
code to the ESMF and EVA source trees.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} ESMF Group Review
\end{reqlist}

\ssreq{EVA Builds}
The same makefile targets, variables and rules
will be used by the EVA build system.
\begin{reqlist}
{\bf Priority:} 1. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} EVA test programs.
\end{reqlist}


\ssreq{Concurrent Builds}
The same set of files can be used for builds on separate 
system architectures concurrently.
\begin{reqlist}
{\bf Priority:} 2. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Test.
\end{reqlist}

\ssreq{Dependency Checking}
The build system will take into account the dependencies 
between source code files and build products.  
\begin{reqlist}
{\bf Priority:} 2. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Script
\end{reqlist}

\ssreq{Automatic Dependency Generation}
The build system will scan source code files to 
generate dependency lists.
\begin{reqlist}
{\bf Priority:} 3. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Script
\end{reqlist}

\ssreq{Log Files}
Status and error log files will be generated by 
the build system.
\begin{reqlist}
{\bf Priority:} 3. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Visual Check
\end{reqlist}

\ssreq{Configuration Checking}
The build system will check for the required system 
libraries and utilities.
\begin{reqlist}
{\bf Priority:} 3. \\
{\bf Source:} ESMF/CSS. \\
{\bf Status:} DRAFT. \\
{\bf Verification:} Script
\end{reqlist}

\ssreq{Easily customize build for local machine}
The ESMF shall have the ability to easily customize the build environment. 
System libraries that are required can be set easily, without modifying 
the build files directly. If the paths to required system libraries 
are not provided or incorrect the build system will let the user know 
how to set them and die gracefully.
\begin{reqlist}
{\bf Priority:} 2. \\
{\bf Source:} CCSM-CPL. \\
{\bf Status:} Approved-2. \\
{\bf Verification:} Set library paths correctly and incorrectly and test that 
the build acts appropriately.
\end{reqlist}
